--- src/main/java/org/apache/tika/parser/image/ImageMetadataExtractor.java	2019-08-02 17:16:05.815635308 +0800
+++ npe.patch	2019-08-02 17:19:48.991757060 +0800
@@ -1,3 +1,4 @@
+
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
@@ -388,11 +389,13 @@
             }
             if (directory.containsTag(ExifIFD0Directory.TAG_DATETIME)) {
                 Date datetime = directory.getDate(ExifIFD0Directory.TAG_DATETIME);
-                String datetimeNoTimeZone = DATE_UNSPECIFIED_TZ.format(datetime);
-                metadata.set(TikaCoreProperties.MODIFIED, datetimeNoTimeZone);
-                // If Date/Time Original does not exist this might be creation date
-                if (metadata.get(TikaCoreProperties.CREATED) == null) {
-                    metadata.set(TikaCoreProperties.CREATED, datetimeNoTimeZone);
+                if (datetime != null) {
+                    String datetimeNoTimeZone = DATE_UNSPECIFIED_TZ.format(datetime);
+                    metadata.set(TikaCoreProperties.MODIFIED, datetimeNoTimeZone);
+                    // If Date/Time Original does not exist this might be creation date
+                    if (metadata.get(TikaCoreProperties.CREATED) == null) {
+                        metadata.set(TikaCoreProperties.CREATED, datetimeNoTimeZone);
+                    }
                 }
             }
         }
@@ -450,4 +453,4 @@
         }
     }
 
-}
+}
\ No newline at end of file
